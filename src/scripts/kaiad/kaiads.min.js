import './kaiad.styles.css'

// eslint-disable-next-line
const getKaiAd=((...e)=>{let t=e[0],r=e[1],l=e[2],n={},o="setAttribute",s="createElement",i="contentWindow",a="appendChild",f="addEventListener",d="dataset",u="keydown",p="length",c="style",y="error",m="timeout",g="push",h="message",v="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",w=v[p],b=parseInt,k=console[y],A={},E=()=>r.body,I=()=>{let e=crypto.getRandomValues(new Uint16Array(32));return[].map.call(e,e=>v[e%w]).join("")},O=I(),S=e=>typeof e==typeof p,j=e=>{let t={};t[24]=e,t[5]=I(),t[16]=[],n[t[5]]=t,t[12]=[],t[25]={},t[15]=(e=>{(t[24].onerror||k)(e),t[29]()}),t[29]=(()=>{t[18]&&t[18].remove(),n[t[5]]=t=l}),t[14]=(()=>{clearTimeout(t[22]),t[24].onready({call(e,r){t[11](e,r)},on(e,r){t[25][e]||(t[25][e]=[]),t[25][e][g](r)}})}),t[11]=((e,...r)=>{if(t[19]&&t[19][i]){let l=[];l[5]=t[5],l[6]=e,l[8]=r,t[19][i].postMessage(JSON.stringify(l,(()=>{const e=new WeakSet;return(t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}})()),"*")}else t[15](4)}),t[22]=(()=>(t[24][m]=t[24][m]||6e4,setTimeout(()=>{t[15](5)},t[24][m])))(),t[17]=(()=>{let e=t[24].container;return e||(e=E(),t[23]=t[24][23]=1),e})(),t[19]=(()=>{let e=`https://ssp.kaiads.com/static/v2/frame.html?i=${t[5]}&s=${O}`,l=r[s]("iframe");l[o]("src",e);let n=r[s]("div");return n[d][O]=t[5],n[c].position="absolute",n[c].left="-1000%",n[c].top="0",t[18]=n,t[23]||(n[f]("focus",e=>t[11]("focus")),n[f]("blur",e=>t[11]("blur"))),n[a](l),t[17][a](n),n[d][O]=t[5],l})()},C=(e,r)=>{let n={};n[10]=e,e[12][g](r[7]),n[7]=r[7],n[6]=r[6],n[28]=-1,n[8]=[],n[9]=[],n[1]=(t=>{let r=n[26](t[1]);if(r[1]){let e=n[27](t[3]);n[9][n[28]]=t[0]?new r[1](...e[0]):r[1](...e[0]),e[1]||n[13]()}else n[10][11](n[6],y,10,e[12][p],n[28])}),n[2]=(t=>{if(t[4]){let r=n[26](t[4]);if(r[21])n[10][11](n[6],y,11,e[12][p],n[28]);else{let e;e=r[1]?r[1]:r[7]?r[7]:t[4];let o=n[26](t[2],e);n[9][n[28]]=l,o[13]||n[13]()}}else{let r=n[26](t[2]);r[21]?n[10][11](n[6],y,12,e[12][p],n[28]):(n[9][n[28]]=r,n[13]())}}),n[13]=((...e)=>{n[28]++,n[8][n[28]]=e;let t=n[7][n[28]];t&&(t[1]?n[1](t):t[2]?n[2](t):n[13]())}),n[27]=(e=>{let t=[[],l];if(e)for(let r=0,l=e[p];l>r;r++)if(S(e[r])){let l=n[26](e[r]);l[1]?(t[0][g](l[1]),l[13]&&(t[1]=1)):l[7]?t[0][g](l[7]):t[0][g](e[r])}else t[0][g](e[r]);return t}),n[26]=((e,r)=>{let o={};if(S(e)&&/^[wts]/.test(e)){let s=e.split("."),i=s.shift();"t"==i?i=n:"w"==i?i=t:"s"==i&&(i=A);for(let e=0,t=s[p];t>e;e++){if(t>e&&(o[20]=i),i[s[e]]===l&&t>e){if(r)break;return o[21]=1,o}if((i===l||i[s[e]]===l)&&t>e&&r===l)return o[21]=1,o;i=i[s[e]]}r!==l&&(o[20][s.pop()]=r,i=r),(e=>typeof e==typeof b)(i)&&(o[13]=i===n[13],o[13]?o[1]=i:o[1]=i.bind(o[20])),o[7]=i}return o}),n[13]()};return t[f](h,e=>{if(!e||!e.origin||"https://ssp.kaiads.com"!==e.origin)return;let t=JSON.parse(e.data);if(n[t[5]]){let e=n[t[5]];t[7]&&C(e,t),e[25][t[6]]&&e[25][t[6]].forEach(e=>e(t[8]))}}),t[f](u,e=>{let t;if(A.vfsAdId&&n[A.vfsAdId])t=n[A.vfsAdId];else{let e=r.activeElement,l=e[d][O];if(!e||!l)return;t=n[l]}t&&(t[16].indexOf(e.key)>-1||(t[11](u,e.key,e.keyCode),e.preventDefault(),e.stopPropagation()))}),e=>{let t=e.onerror||k;E()?e.onready?j(e):t(2):t(1)}})(window,document);

export function getNewAd(id) {
  getKaiAd({
    publisher: 'bc247e7b-cd8a-4dda-be8c-e766a729f6b8',
    app: 'Pixabay',
    slot: 'diTenTapsFS',
    test: 1,
    h: 54,
    w: 240,
    container: document.getElementById(id),
    onerror: err => console.error(err),
    onready: ad => {
      ad.call('display', {
        navClass: 'adItem',
        display: 'block'
      });

      window.scrollTo(0, 0);
    }
  })
}

export function getFullAd() {
  getKaiAd({
    publisher: 'bc247e7b-cd8a-4dda-be8c-e766a729f6b8',
    app: 'Pixabay',
    slot: 'diTenTapsFS',
    onerror: err => console.error(err),
    onready: ad => {
      ad.call('display');
    }
  })
}